<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>dict_new - Csound Plugins</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../css/syntax-highlighting.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "dict_new";
    var mkdocs_page_input_path = "opcodes/dict_new.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Csound Plugins</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../index.html">Csound Plugins</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../Contributing.html">Contributing</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Opcodes</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="accum.html">accum</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="atstop.html">atstop</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="channelStateRecall.html">channelStateRecall</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="channelStateSave.html">channelStateSave</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="crackle.html">crackle</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="defer.html">defer</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="deref.html">deref</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="dict_exists.html">dict_exists</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="dict_free.html">dict_free</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="dict_get.html">dict_get</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="dict_iter.html">dict_iter</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="dict_new.html">dict_new</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#abstract">Abstract</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#description">Description</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#local-vs-global">Local vs Global</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#syntax">Syntax</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#types">Types</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#any-type">any type</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#arguments">Arguments</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#output">Output</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#execution-time">Execution Time</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#see-also">See also</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#credits">Credits</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="dict_print.html">dict_print</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="dict_query.html">dict_query</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="dict_set.html">dict_set</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="dict_size.html">dict_size</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="diode_ringmod.html">diode_ringmod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="errormsg.html">errormsg</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="file_exists.html">file_exists</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="findFileInPath.html">findFileInPath</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="frac2int.html">frac2int</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="getEnvVar.html">getEnvVar</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="jsfx.html">jsfx</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="jsfx_getslider.html">jsfx_setslider</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="jsfx_new.html">jsfx_new</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="jsfx_play.html">jsfx_play</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="jsfx_setslider.html">jsfx_setslider</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="lfnoise.html">lfnoise</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="linenv.html">linenv</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="memview.html">memview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pathAbsolute.html">pathAbsolute</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pathIsAbsolute.html">pathIsAbsolute</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pathJoin.html">pathJoin</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pathNative.html">pathNative</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pathSplit.html">pathSplit</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pathSplitExt.html">pathSplitExt</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pathSplitExtk.html">pathSplitExtk</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pathSplitk.html">pathSplitk</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="poly.html">poly</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="poly0.html">poly0</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="polyseq.html">polyseq</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pool_at.html">pool_at</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pool_capacity.html">pool_capacity</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pool_gen.html">pool_gen</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pool_new.html">pool_new</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pool_pop.html">pool_pop</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pool_push.html">pool_push</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pool_size.html">pool_size</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pread.html">pread</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="pwrite.html">pwrite</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="ramptrig.html">ramptrig</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="ref.html">ref</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="refvalid.html">refvalid</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="schmitt.html">schmitt</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="scriptDir.html">scriptDir</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="setslice.html">setslice</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="sigmdrive.html">sigmdrive</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="standardchaos.html">standardchaos</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="strcache.html">strcache</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="strview.html">strview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="sysPlatform.html">sysPlatform</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="trigExpseg.html">trigExpseg</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="trigLinseg.html">trigLinseg</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="tubeharmonics.html">tubeharmonics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="uniqinstance.html">uniqinstance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="xtracycles.html">xtracycles</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Csound Plugins</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Opcodes &raquo;</li>
        
      
    
    <li>dict_new</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="dict_new">dict_new</h1>
<h2 id="abstract">Abstract</h2>
<p>Create a hashtable </p>
<h2 id="description">Description</h2>
<p>A hashtable is a mapping from a key to a value. The <code>dict_</code> family of opcodes 
implement a hashtable mapping either strings or integers to strings or floats.</p>
<h3 id="local-vs-global">Local vs Global</h3>
<p>A hashtable can be either <strong>local</strong>, in which case its lifespan is fixed to the lifespan 
of the note it was created in; or it can be <strong>global</strong>, in which case <strong>it is not 
deallocated</strong> when the note is released and is kept alive until either the end 
of the performance, or until freed via <a href="dict_free.html">dict_free</a></p>
<p><code>dict_new</code> runs only at <strong>i-time</strong></p>
<h2 id="syntax">Syntax</h2>
<div class="codehilite"><pre><span></span><code>idict dict_new Stype
idict dict_new Stype, key0, value0, key1, value1, ...
</code></pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With the second variant it is possible to create a dict and give it initial values at init-time. </p>
</div>
<h2 id="types">Types</h2>
<p>The types of a dict are fixed at creation time and are specified via the <code>Stype</code> argument. To declare a dict as <code>global</code>, prefix the type with a "*". </p>
<table>
<thead>
<tr>
<th align="left">type</th>
<th align="left">shortform</th>
<th>as global</th>
<th align="left">key</th>
<th align="left">value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">str:float</td>
<td align="left">sf</td>
<td><em>str:float or </em>sf</td>
<td align="left">string</td>
<td align="left">float</td>
</tr>
<tr>
<td align="left">str:str</td>
<td align="left">ss</td>
<td><em>str:str or </em>ss</td>
<td align="left">string</td>
<td align="left">string</td>
</tr>
<tr>
<td align="left">int:float</td>
<td align="left">if</td>
<td><em>int:float or </em>if</td>
<td align="left">int</td>
<td align="left">float</td>
</tr>
<tr>
<td align="left">int:str</td>
<td align="left">is</td>
<td><em>int:str or </em>is</td>
<td align="left">int</td>
<td align="left">string</td>
</tr>
<tr>
<td align="left">str:any</td>
<td align="left">sa</td>
<td><em>str:any or </em>sa</td>
<td align="left">string</td>
<td align="left">any</td>
</tr>
</tbody>
</table>
<h3 id="any-type"><code>any</code> type</h3>
<p>A dict of the form <code>str:any</code> accepts strings as keys and can have both strings and numbers as values. This can be used to pass arguments to an instrument like</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">i</span><span class="n">args</span> <span class="n">dict_new</span> <span class="s">&quot;*sa&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;freq&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="s">&quot;amp&quot;</span><span class="p">,</span> <span class="mf">0.5</span>
    <span class="nb">schedule</span> <span class="s">&quot;myinstr&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="kt">i</span><span class="n">args</span>

    <span class="c1">; then, inside myinstr</span>
    <span class="kd">instr</span> <span class="nf">myinstr</span>
      <span class="kt">i</span><span class="n">args</span> <span class="o">=</span> <span class="vi">p4</span>
      <span class="kt">S</span><span class="n">name</span> <span class="n">dict_get</span> <span class="kt">i</span><span class="n">args</span><span class="p">,</span> <span class="s">&quot;name&quot;</span>
      <span class="kt">k</span><span class="n">freq</span> <span class="n">dict_get</span> <span class="kt">i</span><span class="n">args</span><span class="p">,</span> <span class="s">&quot;freq&quot;</span>
      <span class="kt">k</span><span class="n">amp</span>  <span class="n">dict_get</span> <span class="kt">i</span><span class="n">args</span><span class="p">,</span> <span class="s">&quot;amp&quot;</span>
      <span class="c1">; ... do something with this</span>
    <span class="kd">endin</span>
</code></pre></div>


<h2 id="arguments">Arguments</h2>
<ul>
<li>
<p><code>Stype</code>: a string describing the type of the key and the value. See the table above. <strong>NB</strong>: to declare the dict as global, prepend the type string with a "*".</p>
</li>
<li>
<p><code>key0</code>, <code>value0</code>, <code>key1</code>, <code>value1</code>, etc: initial pairs can be set at creation time, matching 
              the types declared with <code>Stype</code> </p>
</li>
</ul>
<h3 id="output">Output</h3>
<ul>
<li><code>idict</code>: identifies this dict with an integer. This integer can be passed around to another instrument and will always resolve to the same dict, as long as this dict is still alive. This can be checked via <code>dict_query idict, "exists"</code></li>
</ul>
<h3 id="execution-time">Execution Time</h3>
<ul>
<li>Init</li>
</ul>
<h2 id="examples">Examples</h2>
<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="n">CsoundSynthesizer</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">CsOptions</span><span class="o">&gt;</span>
<span class="c1">; -odac  -iadc    ;;;RT audio out and in</span>

<span class="o">&lt;/</span><span class="n">CsOptions</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">CsInstruments</span><span class="o">&gt;</span>

<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">32</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">2</span>

<span class="kd">instr</span> <span class="nf">1</span> 
  <span class="c1">; create a local dict, mapping strings to numbers</span>
  <span class="kt">i</span><span class="n">dict</span> <span class="n">dict_new</span> <span class="s">&quot;sf&quot;</span>

  <span class="c1">; set key a key:value pair</span>
  <span class="n">dict_set</span> <span class="kt">i</span><span class="n">dict</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="mi">123</span>

  <span class="c1">; retrieve the value</span>
  <span class="kt">k</span><span class="n">bar</span> <span class="n">dict_get</span> <span class="kt">i</span><span class="n">dict</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span>

  <span class="c1">; get a non-existent key, will output the default</span>
  <span class="kt">k</span><span class="n">foo</span> <span class="n">dict_get</span> <span class="kt">i</span><span class="n">dict</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> 

  <span class="nb">printf</span> <span class="s">&quot;&gt;&gt;&gt;&gt; bar: </span><span class="si">%f</span><span class="s">,  foo: </span><span class="si">%f</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kt">k</span><span class="n">bar</span><span class="p">,</span> <span class="kt">k</span><span class="n">foo</span> 

  <span class="c1">; now create another dict, this one will outlive this note</span>
  <span class="kt">i</span><span class="n">dict2</span> <span class="n">dict_new</span> <span class="s">&quot;*str:str&quot;</span><span class="p">,</span> <span class="s">&quot;baz&quot;</span><span class="p">,</span> <span class="s">&quot;bazvalue&quot;</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;foovalue&quot;</span>

  <span class="c1">; schedule another inst, pass this dict</span>
  <span class="nb">event</span> <span class="s">&quot;i&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kt">i</span><span class="n">dict2</span>

  <span class="nb">turnoff</span>

<span class="kd">endin</span>

<span class="kd">instr</span> <span class="nf">2</span>
  <span class="kt">i</span><span class="n">dict</span> <span class="o">=</span> <span class="vi">p4</span>
  <span class="kt">S</span><span class="n">baz</span> <span class="o">=</span> <span class="n">dict_get</span><span class="p">(</span><span class="kt">i</span><span class="n">dict</span><span class="p">,</span> <span class="s">&quot;baz&quot;</span><span class="p">)</span>
  <span class="nb">printf</span> <span class="s">&quot;instr 2, kbaz = </span><span class="si">%s</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kt">S</span><span class="n">baz</span>

  <span class="c1">; free dict at the end of this note</span>
  <span class="n">dict_free</span> <span class="kt">i</span><span class="n">dict</span><span class="p">,</span> <span class="mi">1</span>
  <span class="nb">turnoff</span>
<span class="kd">endin</span>

<span class="c1">; schedule 1, 0, 1</span>

<span class="o">&lt;/</span><span class="n">CsInstruments</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">CsScore</span><span class="o">&gt;</span>

<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">2</span>

<span class="o">&lt;/</span><span class="n">CsScore</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">CsoundSynthesizer</span><span class="o">&gt;</span> 
</code></pre></div>


<h2 id="see-also">See also</h2>
<ul>
<li><a href="dict_free.html">dict_free</a></li>
<li><a href="dict_set.html">dict_set</a></li>
</ul>
<h2 id="credits">Credits</h2>
<p>Eduardo Moguillansky, 2019</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dict_print.html" class="btn btn-neutral float-right" title="dict_print">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="dict_iter.html" class="btn btn-neutral" title="dict_iter"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="dict_iter.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="dict_print.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
